USERNAME=username
RAINBOW_GRADES_DIRECTORY=/<PATH_TO_HWSERVER_REPO>/RainbowGrades
HWSERVER=hss.cs.rpi.edu
REPORTSDIRECTORY=/var/local/hss/courses/<SEMESTER>/<COURSE>/reports

.PHONY: default pull process push all compile  by_overall by_section by_lab_pct by_hw_pct by_test_pct by_final_pct by_iclicker cs1_compare clean

default: process

pull:
	mkdir -p raw_data/
	scp ${USERNAME}@${HWSERVER}:${REPORTSDIRECTORY}/all_grades/\* raw_data/



push:
	scp individual_summary_html/* ${USERNAME}@${HWSERVER}:${REPORTSDIRECTORY}/summary_html



compile:
	g++ -std=c++11 -m32 -g \
		${RAINBOW_GRADES_DIRECTORY}/main.cpp \
		${RAINBOW_GRADES_DIRECTORY}/output.cpp \
		${RAINBOW_GRADES_DIRECTORY}/student.cpp \
		${RAINBOW_GRADES_DIRECTORY}/iclicker.cpp \
		-g -o process_grades.out
	mkdir -p individual_summary_html/
	mkdir -p all_students_summary_html/


process: compile by_overall


by_overall: compile
	./process_grades.out by_overall


by_iclicker: compile
	./process_grades.out by_iclickertotal

by_name: compile
	./process_grades.out by_name

by_section: compile
	./process_grades.out by_section

by_lab_pct: compile
	./process_grades.out by_lab_pct

by_hw_pct: compile
	./process_grades.out by_hw_pct

by_test_pct: compile
	./process_grades.out by_test_pct

by_final: compile
	./process_grades.out by_final_pct


clean:
	rm process_grades.out

all: pull process push
