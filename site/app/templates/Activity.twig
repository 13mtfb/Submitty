<div class="content forum_content">
    {% include "forum/ForumBar.twig" with {
        "forum_bar_buttons_right" : forumBarData.forum_bar_buttons_right,
        "forum_bar_buttons_left" : forumBarData.forum_bar_buttons_left,
        "show_threads" : forumBarData.show_threads,
        "thread_exists" : forumBarData.thread_exists,
        "show_filter": false
    } %}
    <div class="stats-table-container">
        <table class="table table-striped table-bordered persist-area" id="forum_stats_table">
            <tr>
                <th class = "cursor-pointer" style="width:15%" id="user_sort"><a href="#">User</a></th>
                <th class = "cursor-pointer"  id="total_posts_sort"><a href="#">Total Posts (not deleted)</a></th>
                <th class = "cursor-pointer" style="width:15%" id="total_threads_sort"><a href="#">Total Threads</a></th>
                <th class = "cursor-pointer" style="width:15%" id="total_deleted_sort"><a href="#">Total Deleted Posts</a></th>
                <th style="width:40%">Show Posts</th>
            </tr>
            
        {% if students.length > 0 %}{
            {% for user in students %}
                <tbody>
                <tr>
                    <td>{{ user.last_name }}, {{ user.first_name }}</td>
                </tr>
                </tbody>
            {% endfor %}
        } 
        {% else %} 
          <h1> No students found. </h1>
       {% endif %}
            
        </table>
    </div>
</div>

<script>
    $("td").click(function(){
        var table_id = 0;
        switch ($(this).attr('id')) {
            default:
                table_id = 0;
        }
    });

    $("button").click(function(){

        var action = $(this).data('action');
        var posts = $(this).data('posts');
        var ids = $(this).data('id');
        var timestamps = $(this).data('timestamps');
        var thread_ids = $(this).data('thread_id');
        var thread_titles = $(this).data('thread_titles');
    
            $(this).html("Collapse");
            $(this).data('action',"collapse");
            $("td").click(function(){

                if($(this).data('type')=="post" || $(this).data('type')=="thread"){
                    var id = $(this).data('thread_id');
                    var url = buildCourseUrl(['forum', 'threads', id]);
                    window.open(url);
                }

            });
        }
        else{
            for(var i=0;i<ids.length;i++){
                var item = document.getElementById(ids[i]);
                item.remove();
            }

            $(this).data('action');
        }


        return false;
    });


</script>
